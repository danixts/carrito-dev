(()=>{"use strict";const t=[{id:1,name:"Ciruelo",price:20,url:"assets/images/ciruelo.png"},{id:2,name:"Coco",price:10,url:"assets/images/coco.png"},{id:3,name:"Frutilla",price:10,url:"assets/images/frutilla.png"},{id:4,name:"Kiwi",price:2,url:"assets/images/kiwi.png"},{id:5,name:"Limon",price:6,url:"assets/images/limon.png"},{id:6,name:"Mango",price:8,url:"assets/images/mango.png"},{id:7,name:"Melon",price:2,url:"assets/images/melon.png"},{id:8,name:"Pi√±a",price:67,url:"assets/images/pina.png"},{id:9,name:"Platano",price:90,url:"assets/images/platano.png"},{id:10,name:"Sandia",price:56,url:"assets/images/sandia.png"},{id:11,name:"Uva",price:3,url:"assets/images/uva.png"}];function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var n=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.template=document.getElementById(e).content,this.root=document.getElementById(n),this.fragment=document.createDocumentFragment()}var n,r;return n=t,(r=[{key:"render",value:function(){}},{key:"event",value:function(){}}])&&e(n.prototype,r),t}();function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"cart",{}),i(this,"KEY","cart"),localStorage.getItem(this.KEY)&&(this.cart=JSON.parse(localStorage.getItem(this.KEY)))}var e,n,r;return e=t,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new t),this.instance}}],(n=[{key:"add",value:function(t){var e=t.id;this.cart.hasOwnProperty(e)&&(t.qty=this.cart[e].qty+1),this.cart[e]=t,console.log(t)}},{key:"increment",value:function(t){var e=this.cart[t];e.qty++,this.cart[t]=a({},e)}},{key:"decrement",value:function(t){var e=this.cart[t];e.qty--,0!==e.qty?this.cart[t]=a({},e):delete this.cart[t]}},{key:"total",value:function(){return[this.get().reduce((function(t,e){return t+ +e.qty}),0),this.get().reduce((function(t,e){return t+ +e.qty*+e.price}),0)]}},{key:"get",value:function(){return Object.values(this.cart)}},{key:"clear",value:function(){this.cart={},localStorage.removeItem(this.KEY)}},{key:"setLocalStorage",value:function(){localStorage.setItem(this.KEY,JSON.stringify(this.cart))}}])&&o(e.prototype,n),r&&o(e,r),t}();i(c,"instance",void 0);var u=c.getInstance();function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),t}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g(t);if(e){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v(this,n)}}function v(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(e){m(r,e);var n=h(r);function r(){var t;return f(this,r),(t=n.call(this,"template-product","app-product")).Cart=new O,t.event(),t}return y(r,[{key:"render",value:function(){var e=this;t.forEach((function(t){var n=t.id,r=t.url,a=t.name,o=t.price;e.template.querySelector("img").src=r,e.template.querySelector("span").textContent=a,e.template.querySelector("b").textContent=o,e.template.querySelector("button").dataset.id=n;var i=e.template.cloneNode(!0);e.fragment.appendChild(i)})),this.root.append(this.fragment)}},{key:"event",value:function(){var t=this;this.root.addEventListener("click",(function(e){e.target.classList.contains("btn-buy")&&(t.createElementCart(e.target.parentNode),t.Cart.render())}))}},{key:"createElementCart",value:function(t){var e=t.querySelector("button").dataset.id,n=t.querySelector(".text-name").textContent,r={id:e,price:t.querySelector(".text-price").textContent,name:n,qty:1};u.add(r)}}]),r}(n),O=function(t){m(n,t);var e=h(n);function n(){var t;return f(this,n),(t=e.call(this,"template-cart-list","app-cart-list")).Total=new S,t.btnClear=document.getElementById("btn-clear"),t.render(),t.event(),t}return y(n,[{key:"render",value:function(){var t=this;this.root.innerHTML="",u.get().forEach((function(e){var n=e.id,r=e.price,a=e.name,o=e.qty;t.template.querySelector(".text-id").textContent=n,t.template.querySelector(".text-name").textContent=a,t.template.querySelector(".text-qty").textContent=o,t.template.querySelector(".text-total").textContent=+o*+r,t.template.querySelector(".btn-minus").dataset.id=n,t.template.querySelector(".btn-plus").dataset.id=n;var i=t.template.cloneNode(!0);t.fragment.appendChild(i)})),this.root.appendChild(this.fragment),this.Total.render(),u.setLocalStorage()}},{key:"event",value:function(){var t=this;this.btnClear.addEventListener("click",(function(e){u.clear(),t.render()})),this.root.addEventListener("click",(function(e){if(e.target.classList.contains("btn-minus")){var n=e.target.dataset.id;u.decrement(n),t.render()}if(e.target.classList.contains("btn-plus")){var r=e.target.dataset.id;u.increment(r),t.render()}}))}}]),n}(n),S=function(t){m(n,t);var e=h(n);function n(){var t;return f(this,n),(t=e.call(this,"template-cart-total","app-cart-total")).render(),t}return y(n,[{key:"render",value:function(){this.root.innerHTML="";var t,e,n=(t=u.total(),e=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(t){c=!0,a=t}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],a=n[1];this.template.querySelector(".text-qty").textContent=r,this.template.querySelector(".text-total").textContent=a;var o=this.template.cloneNode(!0);this.fragment.appendChild(o),this.root.appendChild(this.fragment)}}]),n}(n);document.addEventListener("DOMContentLoaded",(function(){(new b).render()}))})();